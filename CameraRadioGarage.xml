<?xml version="1.0" encoding="UTF-8"?>
 
 <vxml version="2.0" xmlns="http://www.w3.org/2001/vxml">
      
 <form id="MenuOptions">
    <var name = "camera_status" expr="'off'" />
    <var name = "radio_status" expr="'off'" />
    <var name = "garage_status" expr="'close'" />
    <block name="welcome">
        <prompt> Welcome to smart home control system </prompt>
        <break strength="weak" />
        <goto nextitem="name" />
     </block>

  <!-- Set radio Station -->
             
             <field name="station">
                 <grammar src="builtin:grammar/number" />
                <prompt count="1"> Sure. I can do that for you. What station </prompt>
                <prompt count="2"> Can you say again. </prompt>
                <break strength="weak" />
                
                    <nomatch cond="true" count="1">
                        <prompt bargein="true"  > Sorry. Say that again.</prompt>
                    </nomatch>
                 
                 <nomatch cond="true" count="2">
                        <prompt> Still not getting it. You may use touch pad to enter. </prompt>
                    </nomatch>
                 
                    <filled>
                        <prompt> Radio station changed to <value expr="station"/>  </prompt>
                         <clear namelist="station"/>
                        <goto nextitem="name" />
                    </filled>
             </field>
    
     <field name="name" >
       <grammar type= "application/grammar+xml" mode="voice" root="scale" version="1.0">
	       <rule id="scale" scope="public">
<one-of> 
    
      <item> <ruleref special = "GARBAGE"/> camera <ruleref special = "GARBAGE"/>  on <ruleref special = "GARBAGE"/> </item>
      <item> <ruleref special = "GARBAGE"/> camera <ruleref special = "GARBAGE"/>  off <ruleref special = "GARBAGE"/> </item>
      <item> <ruleref special = "GARBAGE"/> camera <ruleref special = "GARBAGE"/>  status <ruleref special = "GARBAGE"/> </item>
      
      <item> <ruleref special = "GARBAGE"/> garage <ruleref special = "GARBAGE"/>  open <ruleref special = "GARBAGE"/> </item>
      <item> <ruleref special = "GARBAGE"/> garage <ruleref special = "GARBAGE"/>  close <ruleref special = "GARBAGE"/> </item>
      <item> <ruleref special = "GARBAGE"/> garage <ruleref special = "GARBAGE"/>  status <ruleref special = "GARBAGE"/> </item>

      <item> <ruleref special = "GARBAGE"/> light <ruleref special = "GARBAGE"/>  on <ruleref special = "GARBAGE"/> </item>
      <item> <ruleref special = "GARBAGE"/> light <ruleref special = "GARBAGE"/>  off<ruleref special = "GARBAGE"/> </item>
      <item> <ruleref special = "GARBAGE"/> light <ruleref special = "GARBAGE"/>  status <ruleref special = "GARBAGE"/> </item>


      <item> <ruleref special = "GARBAGE"/> radio <ruleref special = "GARBAGE"/>  on <ruleref special = "GARBAGE"/> </item>
      <item> <ruleref special = "GARBAGE"/> radio <ruleref special = "GARBAGE"/>  off <ruleref special = "GARBAGE"/> </item>
      <item> <ruleref special = "GARBAGE"/> radio <ruleref special = "GARBAGE"/>  status <ruleref special = "GARBAGE"/> </item>
      <item> <ruleref special = "GARBAGE"/> radio <ruleref special = "GARBAGE"/>  station <ruleref special = "GARBAGE"/> </item>
    
     <item> <ruleref special = "GARBAGE"/>living <ruleref special = "GARBAGE"/>thermostat <ruleref special = "GARBAGE"/> on<ruleref special = "GARBAGE"/> </item>
     <item> <ruleref special = "GARBAGE"/> living <ruleref special = "GARBAGE"/>thermostat <ruleref special = "GARBAGE"/>off<ruleref special = "GARBAGE"/> </item>
     <item> <ruleref special = "GARBAGE"/> living <ruleref special = "GARBAGE"/> increase <ruleref special = "GARBAGE"/> </item>
     <item> <ruleref special = "GARBAGE"/> living <ruleref special = "GARBAGE"/> decrease <ruleref special = "GARBAGE"/> </item>
     <item> <ruleref special = "GARBAGE"/> living <ruleref special = "GARBAGE"/> up <ruleref special = "GARBAGE"/> </item>
     <item> <ruleref special = "GARBAGE"/> living <ruleref special = "GARBAGE"/> down <ruleref special = "GARBAGE"/> </item>
</one-of>

	</rule>
       </grammar>
         
<break strength="weak" />
 <prompt> What would you like to do ? </prompt>
 <break strength="weak" />

<nomatch>
<prompt> Sorry. I did not understand. </prompt>
<break strength="weak" />
</nomatch>

<noinput>
<prompt> Sorry. I did not hear. </prompt>
<break strength="weak" />
</noinput>

<filled mode="any">
         <prompt> You said <value expr="name"/> </prompt>
         <break strength="weak" />
    
      <!-- Turn on Camera -->
    <if cond ="name=='camera on'">
        <if cond = "camera_status == 'on'">
				            <prompt> Surveillance camera already on </prompt>
                            <break strength="weak"  />
                            <clear namelist="name"/>
                            <goto nextitem="name" />
			         <else/>
				            <prompt> Surveillance camera turned on </prompt>
                            <break strength="weak"  />
                            <assign name="camera_status" expr="'on'" />
                            <clear namelist="name"/>
                            <goto nextitem="name" />
			         </if>
        
      <!-- Turn camera Off-->
    <elseif cond ="name=='camera off'" />
        
        <if cond = "camera_status == 'off'">
				    <prompt> Surveillance camera already off </prompt>
                    <break strength="weak" />
                    <clear namelist="name"/>
                    <goto nextitem="name" />
        <else/>
				    <prompt> Surveillance camera turned off </prompt>
                     <break strength="weak" />
                    <assign name="camera_status" expr="'off'" />
                    <clear namelist="name"/>
                    <goto nextitem="name" />
        </if>
    <!-- Check camera status -->
    <elseif cond ="name=='camera status'" />
        
        <if cond = "camera_status == 'off'">
				    <prompt> Surveillance camera is off </prompt>
                     <break strength="weak" />
                    <goto nextitem="name" />
        <else/>
				    <prompt> Surveillance camera is on </prompt>
                     <break strength="weak" />
                    <goto nextitem="name" />
        </if>
      <!-- check radio status-->
    <elseif cond ="name=='radio status'" />
        
        <if cond = "radio_status == 'off'">
				    <prompt> Radio is <emphasis level="strong"> off </emphasis> </prompt>
                     <break strength="weak" />
                    <goto nextitem="name" />
        <else/>
				    <prompt> Radio is on </prompt>
                     <break strength="weak" />
                    <goto nextitem="name" />
        </if>
        
      <!-- Turn on radio -->
    <elseif cond ="name=='radio on'" />
        
        <if cond = "radio_status == 'on'">
            <prompt> Radio already <emphasis level="moderate">on </emphasis> </prompt>
                 <break strength="weak" />
                <clear namelist="name"/>
                <goto nextitem="name" />
        <else/>
				<prompt> Radio turned on </prompt>
                 <break strength="weak" />
                <assign name="radio_status" expr="'on'" />
                <clear namelist="name"/>
                <goto nextitem="name" />
        </if>
        
      <!-- Switch off radio -->
    <elseif cond ="name=='radio off'" />
        
        <if cond = "radio_status == 'off'">
				    <prompt> Radio is already off </prompt>
                     <break strength="weak" />
                    <clear namelist="name"/>
                    <goto nextitem="name" />
        <else/>
				    <prompt> Radio turned off </prompt>
                     <break strength="weak" />
                    <assign name="radio_status" expr="'off'" />
                    <clear namelist="name"/>
                    <goto nextitem="name" />
        </if>
      <!-- Set Radio station -->
    <elseif cond ="name=='set station'" />
        <goto nextitem="station"></goto>
        
    <!-- Check garage status -->
    <elseif cond ="name=='garage status'" />
        
        <if cond = "garage_status == 'open'">
				    <prompt> Garage door is <emphasis level="moderate">open </emphasis> </prompt>
                     <break strength="weak" />
                    <goto nextitem="name" />
        <else/>
				    <prompt> Garage door is closed </prompt>
                     <break strength="weak" />
                    <goto nextitem="name" />
        </if>
        
     <!-- Open garage door -->
    <elseif cond ="name=='garage open'" />
        
        <if cond = "garage_status == 'open'">
				<prompt> Garage door is already open </prompt>
                 <break strength="weak" />
                <clear namelist="name"/>
                <goto nextitem="name" />
        <else/>
				<prompt> Garage door opened</prompt>
                 <break strength="weak" />
                <assign name="garage_status" expr="'open'" />
                <clear namelist="name"/>
                <goto nextitem="name" />
        </if>
      <!-- Close garage door -->
    <elseif cond ="name=='garage close'" />
        
        <if cond = "garage_status == 'close'">
				    <prompt> Garage door is already closed </prompt>
                     <break strength="weak" />
                    <clear namelist="name"/>
                    <goto nextitem="name" />
        <else/>
				    <prompt> Garage door closed </prompt>
                     <break strength="weak" />
                    <assign name="garage_status" expr="close'" />
                    <clear namelist="name"/>
                    <goto nextitem="name" />
        </if>
       
    </if>

       </filled>

     </field>
       
           

   </form>
 </vxml>